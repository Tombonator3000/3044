<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry 3044 - Enhanced Arcade Edition</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <div id="menuScreen">
            <!-- ============================================
                 LAYER 1: RETRO BACKGROUND (Bakerst - z-index lav)
                 Alt bakgrunnsinnhold som ALDRI skal p√•virkes av UI
                 ============================================ -->
            <div class="retro-background">
                <!-- Stjernefelt -->
                <div class="starfield" id="starfield"></div>

                <!-- Den store retro-solen -->
                <div class="synthwave-sun"></div>

                <!-- Fjell i horisonten -->
                <div class="synthwave-mountains"></div>

                <!-- Grid-gulvet med perspektiv -->
                <div class="grid-floor"></div>
            </div>

            <!-- ============================================
                 LAYER 2: UI CONTAINER (Foran - z-index h√∏y)
                 All UI-innhold som ligger over bakgrunnen
                 ============================================ -->

            <!-- ATTRACT MODE: Title + INSERT COIN (shown first) -->
            <div class="attract-mode ui-container" id="attractMode">
                <h1 class="game-title">GEOMETRY <span class="title-year">3044</span></h1>

                <div id="menuHighScore" class="attract-high-score">
                    HIGH SCORE: <span id="highScoreDisplay">0</span>
                </div>

                <div class="spacer"></div>

                <div id="insertCoinText">
                    PRESS START
                </div>

                <div class="attract-hint">
                    C: INSERT COIN
                </div>
            </div>

            <!-- FULL MENU: Shown after pressing start -->
            <div class="full-menu ui-container" id="fullMenu">
                <h1 class="game-title game-title-small">GEOMETRY <span class="title-year">3044</span></h1>

                <!-- Main Menu Navigation -->
                <nav class="main-menu">
                    <ul>
                        <li><button class="menu-btn menu-btn-primary" id="startGameBtn">START GAME</button></li>
                        <li><button class="menu-btn" id="selectShipBtn">SELECT SHIP</button></li>
                        <li><button class="menu-btn" id="gameModeBtn">GAME MODE</button></li>
                        <li><button class="menu-btn" id="optionsBtn">OPTIONS</button></li>
                    </ul>
                </nav>

                <!-- Tertiary Actions (smaller) -->
                <div class="menu-buttons-tertiary">
                    <button class="btn-tertiary" id="dailyChallengeBtn">Daily Challenge</button>
                    <button class="btn-tertiary" id="achievementsBtn">Achievements</button>
                    <button class="btn-tertiary" id="highScoresBtn">High Scores</button>
                </div>

                <!-- Footer Info -->
                <div class="footer-info">
                    <p class="credits" id="creditsDisplay">CREDITS: <span id="creditsCount">3</span></p>
                    <p class="insert-coin blink">INSERT COIN</p>
                </div>
            </div>

            <!-- ============================================
                 LAYER 3: OVERLAYS (√òverst - over absolutt alt)
                 Retro-effekter for gammel TV-f√∏lelse
                 ============================================ -->
            <div class="scanlines-overlay"></div>
            <div class="vignette-overlay"></div>
            <div class="crt-flicker"></div>
        </div>

        <div id="gameOverScreen">
            <h2 class="game-over-title">GAME OVER MAN, GAME OVER!</h2>
            <div class="final-score-display">
                Final Score: <span id="finalScoreDisplay">0</span>
            </div>
            <div class="final-wave-display">
                Wave Reached: <span id="finalWaveDisplay">1</span>
            </div>
            <div class="final-combo-display">
                Max Combo: <span id="finalComboDisplay">0</span>
            </div>
            <button class="btn" id="playAgainBtn">Play Again</button>
            <button class="btn" id="mainMenuBtn" style="margin-top: 20px;">Main Menu</button>
        </div>

        <div id="highScoreEntryScreen">
            <div class="high-score-title">üèÜ NEW HIGH SCORE! üèÜ</div>
            <div class="new-high-score-value">
                Score: <span id="newHighScoreValue">0</span>
            </div>
            <div class="enter-initials-prompt">
                Enter Your Initials
            </div>
            <div class="initial-input">
                <input type="text" class="initial-letter" id="initial1" maxlength="1">
                <input type="text" class="initial-letter" id="initial2" maxlength="1">
                <input type="text" class="initial-letter" id="initial3" maxlength="1">
            </div>
            <button class="btn" id="submitScoreBtn" style="margin-top: 30px;">Submit Score</button>
            <div class="submit-hint">
                Press ENTER to submit or ESC to skip
            </div>
        </div>

        <div id="highScoreListScreen">
            <div class="high-score-title">üèÜ HIGH SCORES üèÜ</div>
            <div class="high-score-list" id="highScoreList">
                <!-- High scores will be populated here -->
            </div>
            <button class="btn" id="closeHighScoresBtn">Continue</button>
        </div>

        <div id="continueScreen">
            <div class="continue-title">CONTINUE?</div>
            <div class="continue-score-display">
                Final Score: <span id="continueScoreDisplay">0</span>
            </div>
            <div class="continue-timer">
                <span id="continueTimerDisplay">10</span>
            </div>
            <div class="continue-instruction">
                INSERT COIN TO CONTINUE
            </div>
            <div class="continue-hint">
                Press C to Insert Coin
            </div>
        </div>

        <!-- OPTIONS SCREEN -->
        <div id="optionsScreen">
            <div class="options-container">
                <h2 class="options-title">OPTIONS</h2>

                <div class="options-section">
                    <h3 class="section-title">AUDIO</h3>
                    <div class="option-row">
                        <span class="option-label">SOUND FX</span>
                        <button class="toggle-btn active" id="soundToggle">ON</button>
                    </div>
                    <div class="option-row">
                        <span class="option-label">MUSIC</span>
                        <button class="toggle-btn active" id="musicToggle">ON</button>
                    </div>
                </div>

                <div class="options-section">
                    <h3 class="section-title">VISUALS</h3>
                    <div class="option-row">
                        <span class="option-label">VHS EFFECT</span>
                        <button class="toggle-btn active" id="vhsToggle">ON</button>
                    </div>
                    <div class="option-row">
                        <span class="option-label">SCANLINES</span>
                        <button class="toggle-btn active" id="scanlinesToggle">ON</button>
                    </div>
                    <div class="option-row">
                        <span class="option-label">SCREEN SHAKE</span>
                        <button class="toggle-btn active" id="screenShakeToggle">ON</button>
                    </div>
                    <div class="option-row">
                        <span class="option-label">PARTICLES</span>
                        <div class="multi-toggle">
                            <button class="particle-btn" data-value="low">LOW</button>
                            <button class="particle-btn" data-value="medium">MED</button>
                            <button class="particle-btn active" data-value="high">HIGH</button>
                        </div>
                    </div>
                </div>

                <div class="options-section">
                    <h3 class="section-title">GAMEPLAY</h3>
                    <div class="option-row">
                        <span class="option-label">DIFFICULTY</span>
                        <div class="multi-toggle difficulty-toggle">
                            <button class="difficulty-btn" data-value="easy">EASY</button>
                            <button class="difficulty-btn active" data-value="normal">NORMAL</button>
                            <button class="difficulty-btn" data-value="hard">HARD</button>
                            <button class="difficulty-btn" data-value="extreme">EXTREME</button>
                        </div>
                    </div>
                </div>

                <button class="btn" id="optionsBackBtn">BACK</button>
            </div>
        </div>

        <!-- SHIP SELECT SCREEN -->
        <div id="shipSelectScreen" class="fullscreen-menu">
            <div class="menu-container">
                <h2 class="screen-title">SELECT YOUR SHIP</h2>
                <div class="ship-grid" id="shipGrid">
                    <!-- Ships will be populated by JavaScript -->
                </div>
                <div class="selection-info">
                    <div class="selected-ship-name" id="selectedShipName">NEON FALCON</div>
                    <div class="selected-ship-desc" id="selectedShipDesc">Balanced ship for all situations</div>
                    <div class="selected-ship-stats" id="selectedShipStats"></div>
                </div>
                <div class="menu-nav-buttons">
                    <button class="btn" id="confirmShipBtn">SELECT</button>
                    <button class="btn btn-secondary" id="backFromShipBtn">BACK</button>
                </div>
            </div>
        </div>

        <!-- GAME MODE SELECT SCREEN -->
        <div id="gameModeScreen" class="fullscreen-menu">
            <div class="menu-container">
                <h2 class="screen-title">SELECT GAME MODE</h2>
                <div class="mode-grid" id="modeGrid">
                    <!-- Modes will be populated by JavaScript -->
                </div>
                <div class="selection-info">
                    <div class="selected-mode-name" id="selectedModeName">CLASSIC</div>
                    <div class="selected-mode-desc" id="selectedModeDesc">Standard arcade mode with waves of enemies</div>
                </div>
                <div class="menu-nav-buttons">
                    <button class="btn" id="confirmModeBtn">SELECT</button>
                    <button class="btn btn-secondary" id="backFromModeBtn">BACK</button>
                </div>
            </div>
        </div>

        <!-- DAILY CHALLENGE SCREEN -->
        <div id="dailyChallengeScreen" class="fullscreen-menu">
            <div class="menu-container">
                <h2 class="screen-title">DAILY CHALLENGE</h2>
                <div class="challenge-info" id="challengeInfo">
                    <!-- Challenge info will be populated by JavaScript -->
                </div>
                <div class="menu-nav-buttons">
                    <button class="btn" id="playDailyChallengeBtn">PLAY CHALLENGE</button>
                    <button class="btn btn-secondary" id="backFromChallengeBtn">BACK</button>
                </div>
            </div>
        </div>

        <!-- ACHIEVEMENTS SCREEN -->
        <div id="achievementsScreen" class="fullscreen-menu">
            <div class="menu-container achievements-container">
                <h2 class="screen-title">ACHIEVEMENTS</h2>
                <div class="achievements-progress" id="achievementsProgress">0/25 Unlocked</div>
                <div class="achievements-list" id="achievementsList">
                    <!-- Achievements will be populated by JavaScript -->
                </div>
                <div class="menu-nav-buttons">
                    <button class="btn btn-secondary" id="backFromAchievementsBtn">BACK</button>
                </div>
            </div>
        </div>

    </div>

    <!-- PC 3-PART LAYOUT: Left HUD | Game | Right HUD -->
    <div id="pcLayout">
        <div id="leftHudPanel" class="hud-panel">
            <div class="hud-section">
                <div class="hud-label">LIVES</div>
                <div class="hud-value" id="pcLivesDisplay">3</div>
            </div>
            <div class="hud-section">
                <div class="hud-label">BOMBS</div>
                <div class="hud-value bombs" id="pcBombsDisplay">3</div>
            </div>
            <div class="hud-section">
                <div class="hud-label">WEAPON</div>
                <div class="hud-value weapon" id="pcWeaponDisplay">STANDARD</div>
            </div>
            <div class="hud-section">
                <div class="hud-label">COMBO</div>
                <div class="hud-value combo" id="pcComboDisplay">x1</div>
            </div>
            <div class="hud-section power-ups">
                <div class="hud-label">POWER-UPS</div>
                <div class="power-up-slots" id="pcPowerUpSlots"></div>
            </div>
        </div>

        <div id="centerGameArea">
            <!-- Canvas will be moved here via JS -->
        </div>

        <div id="rightHudPanel" class="hud-panel">
            <div class="hud-section">
                <div class="hud-label">SCORE</div>
                <div class="hud-value score" id="pcScoreDisplay">0</div>
            </div>
            <div class="hud-section">
                <div class="hud-label">HI-SCORE</div>
                <div class="hud-value highscore" id="pcHighScoreDisplay">0</div>
            </div>
            <div class="hud-section">
                <div class="hud-label">WAVE</div>
                <div class="hud-value wave" id="pcWaveDisplay">1</div>
            </div>
            <div class="hud-section">
                <div class="hud-label">MULTIPLIER</div>
                <div class="hud-value multiplier" id="pcMultiplierDisplay">x1.0</div>
            </div>
            <div class="hud-section boss-section" id="pcBossSection">
                <div class="hud-label">BOSS HP</div>
                <div class="boss-health-bar">
                    <div class="boss-health-fill" id="pcBossHealthFill"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile HUD overlay (shown on mobile only) -->
    <div id="mobileHudLayer">
        <div id="mobileTopHud">
            <div class="mobile-hud-item">
                <span class="mobile-hud-label">SCORE</span>
                <span class="mobile-hud-value" id="mobileScoreDisplay">0</span>
            </div>
            <div class="mobile-hud-item">
                <span class="mobile-hud-label">LIVES</span>
                <span class="mobile-hud-value lives" id="mobileLivesDisplay">3</span>
            </div>
            <div class="mobile-hud-item">
                <span class="mobile-hud-label">WAVE</span>
                <span class="mobile-hud-value wave" id="mobileWaveDisplay">1</span>
            </div>
        </div>
    </div>

    <div id="hudLayer">
        <div id="gameUI">
            <div class="ui-row">
                <div class="ui-element score">Score: <span id="scoreDisplay">0</span></div>
                <div class="ui-element wave">Wave: <span id="waveDisplay">1</span></div>
            </div>
            <div class="ui-row">
                <div class="ui-element lives">Lives: <span id="livesDisplay">3</span></div>
                <div class="ui-element bombs">Bombs: <span id="bombsDisplay">3</span></div>
            </div>
        </div>

        <div id="gameHighScore">High Score: <span id="gameHighScoreDisplay">0</span></div>
        <div id="pauseOverlay">PAUSED</div>
    </div>

    <div id="touchControlsLayer">
        <div id="mobileControls">
            <div id="touchJoystick" class="touch-button">MOVE</div>
            <div id="touchFire" class="touch-button">FIRE</div>
            <div id="touchBomb" class="touch-button">BOMB</div>
        </div>
    </div>

    <!-- ES6 Module entry point -->
    <script type="module" src="js/main.js?v=20241219"></script>
</body>
</html>
